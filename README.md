# Reviews Sentiment Service

Мини-сервис для анализа настроения отзывов в реальном времени. Сервис принимает отзывы пользователей и автоматически определяет их эмоциональную окраску (позитивная, негативная или нейтральная).

## Описание

Сервис создан для стартапа, который собирает отзывы пользователей в реальном времени и помогает быстро реагировать на обратную связь. Основные возможности:

- Автоматический анализ настроения отзывов
- Сохранение отзывов в базе данных SQLite
- API для создания и получения отзывов
- Фильтрация отзывов по настроению
- Простая интеграция с другими системами

## Технологии

- **FastAPI** - современный веб-фреймворк для создания API
- **SQLite** - легковесная база данных
- **Pydantic** - валидация данных и сериализация
- **Uvicorn** - ASGI сервер для запуска приложения

## Установка и запуск

### Требования

- make 
- Python 3.7+
- pip

### Создание окружения

```bash
make venv
```

### Активация окружения

```bash
make activate
```

### Установка зависимостей

```bash
make install
```

### Запуск сервиса

```bash
make run
```

### Очистка

```bash
make clean
```

Сервис будет доступен по адресу: http://localhost:8000

### Автоматическая документация API

FastAPI автоматически генерирует интерактивную документацию:

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## API Эндпоинты

### POST /reviews

Создание нового отзыва с автоматическим анализом настроения.

**Запрос:**
```json
{
  "text": "Ваш отзыв"
}
```

**Ответ:**
```json
{
  "id": 1,
  "text": "Ваш отзыв",
  "sentiment": "positive",
  "created_at": "2024-01-15T10:30:00.123456"
}
```

### GET /reviews

Получение списка всех отзывов или фильтрация по настроению.

**Параметры запроса:**
- `sentiment` (опционально) - фильтр по настроению: `positive`, `negative`, `neutral`

**Ответ:**
```json
[
  {
    "id": 1,
    "text": "Отличный сервис!",
    "sentiment": "positive",
    "created_at": "2024-01-15T10:30:00.123456"
  }
]
```

## Примеры использования

### Создание позитивного отзыва

```bash
curl -X POST "http://localhost:8000/reviews" \
     -H "Content-Type: application/json" \
     -d '{"text": "Отличный сервис, всё работает прекрасно!"}'
```

**Ответ:**
```json
{
  "id": 1,
  "text": "Отличный сервис, всё работает прекрасно!",
  "sentiment": "positive",
  "created_at": "2024-01-15T10:30:00.123456"
}
```

### Создание негативного отзыва

```bash
curl -X POST "http://localhost:8000/reviews" \
     -H "Content-Type: application/json" \
     -d '{"text": "Ужасно работает, всё плохо!"}'
```

**Ответ:**
```json
{
  "id": 2,
  "text": "Ужасно работает, всё плохо!",
  "sentiment": "negative",
  "created_at": "2024-01-15T10:31:00.123456"
}
```

### Создание нейтрального отзыва

```bash
curl -X POST "http://localhost:8000/reviews" \
     -H "Content-Type: application/json" \
     -d '{"text": "Обычный сервис, ничего особенного"}'
```

**Ответ:**
```json
{
  "id": 3,
  "text": "Обычный сервис, ничего особенного",
  "sentiment": "neutral",
  "created_at": "2024-01-15T10:32:00.123456"
}
```

### Получение всех отзывов

```bash
curl -X GET "http://localhost:8000/reviews"
```

### Получение только негативных отзывов

```bash
curl -X GET "http://localhost:8000/reviews?sentiment=negative"
```

**Ответ:**
```json
[
  {
    "id": 2,
    "text": "Ужасно работает, всё плохо!",
    "sentiment": "negative",
    "created_at": "2024-01-15T10:31:00.123456"
  }
]
```

### Получение только позитивных отзывов

```bash
curl -X GET "http://localhost:8000/reviews?sentiment=positive"
```

### Получение нейтральных отзывов

```bash
curl -X GET "http://localhost:8000/reviews?sentiment=neutral"
```

## Алгоритм анализа настроения

Сервис использует простой словарный подход для определения настроения:

### Позитивные слова:
- хорош, отлично, прекрасно, замечательно
- люблю, нравится, супер, класс, круто
- восхитительно, великолепно, идеально
- потрясающе, превосходно, шикарно, браво, молодцы

### Негативные слова:
- плохо, ужасно, отвратительно, ненавижу
- не нравится, кошмар, провал, разочарование
- бред, ерунда, глупо, тупо, дрянь
- мусор, гадость, безобразие, позор

### Логика определения:
1. Подсчитывается количество позитивных и негативных слов в тексте
2. Если позитивных больше → `positive`
3. Если негативных больше → `negative`
4. Если равное количество или нет ключевых слов → `neutral`

## Структура базы данных

Сервис автоматически создает SQLite базу данных `reviews.db` со следующей структурой:

```sql
CREATE TABLE IF NOT EXISTS reviews (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    text TEXT NOT NULL,
    sentiment TEXT NOT NULL,
    created_at TEXT NOT NULL
);
```

## Структура проекта

```
reviews-service/
├── main.py              # Основной файл приложения
├── requirements.txt     # Зависимости Python
├── README.md           # Документация
├── .gitignore          # Игнорируемые файлы для Git
├── reviews.db          # База данных (создается автоматически, если нету)
└── config 
   ├── config.py        # конфиги
└── database 
   ├── database.py      # бдшка
└── models 
   ├── models.py         # модели пидантика
```

## Развертывание

### Локальное развертывание

```bash
# Клонирование репозитория
git clone https://github.com/TIP1/LLM-Reviews-Service.git
cd reviews_service

```

## Автор

Ignaty Limansky

